# 语音识别网络错误解决方案

## 错误描述
当您看到"网络请求错误: recognition request failed: Service Unavailable"时，表示程序无法连接到Google语音识别服务器。

## 常见原因

### 1. 网络连接问题
- **现象**: 无法访问Google服务
- **原因**: 中国大陆网络环境限制
- **影响**: Google API无法正常调用

### 2. DNS解析问题
- **现象**: 域名无法解析
- **原因**: DNS服务器不稳定
- **影响**: 无法找到服务器地址

### 3. 防火墙限制
- **现象**: 连接被阻止
- **原因**: 系统或网络防火墙设置
- **影响**: 请求被拦截

## 解决方案

### 方案一：快速修复（推荐）
1. **运行修复工具**:
   ```
   双击运行: fix_network_error.bat
   ```

2. **选择修复选项**:
   - 选项2: 刷新DNS缓存（最常用）
   - 选项4: 安装离线语音识别
   - 选项5: 切换到本地版本

### 方案二：手动网络修复
1. **更换DNS服务器**:
   - 打开网络设置
   - 设置DNS为: 8.8.8.8 和 8.8.4.4
   - 或使用: 114.114.114.114

2. **刷新网络缓存**:
   ```cmd
   ipconfig /flushdns
   ipconfig /release
   ipconfig /renew
   ```

3. **重启网络服务**:
   ```cmd
   netsh winsock reset
   ```

### 方案三：使用代理服务器
1. **设置系统代理**:
   - 打开设置 → 网络和Internet → 代理
   - 配置HTTP代理服务器

2. **使用VPN服务**:
   - 连接到可访问Google服务的VPN
   - 确保连接稳定

### 方案四：切换到本地识别（最稳定）
1. **使用本地版本**:
   ```cmd
   copy speech_recognizer_local.py speech_recognizer.py
   ```

2. **安装离线依赖**:
   ```cmd
   pip install pocketsphinx
   ```

3. **重启应用程序**

## 各方案对比

| 方案 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 网络修复 | 恢复原有功能 | 可能不稳定 | 网络环境良好 |
| 代理/VPN | 访问Google服务 | 需要额外配置 | 有技术基础 |
| 本地识别 | 完全离线，稳定 | 准确度稍低 | 网络受限环境 |

## 推荐使用流程

### 第一步：快速诊断
运行 `fix_network_error.bat` 检查网络状态

### 第二步：选择解决方案
- **网络正常**: 选择DNS修复
- **网络受限**: 选择本地识别
- **技术用户**: 配置代理服务器

### 第三步：验证修复
重启应用程序，测试语音识别功能

## 常见问题解答

### Q: 为什么会出现这个错误？
A: 主要是因为Google服务在中国大陆的网络环境中访问受限。

### Q: 本地识别准确度如何？
A: 离线识别准确度约为网络识别的70-80%，但胜在稳定可靠。

### Q: 可以同时使用多种识别引擎吗？
A: 可以，程序会自动按优先级尝试不同的识别引擎。

### Q: 修复后还是不行怎么办？
A: 建议直接切换到本地识别版本，这是最稳定的解决方案。

## 技术支持

如果以上方案都无法解决问题，可以尝试：

1. **检查防火墙设置**
2. **更新网络驱动程序**
3. **联系网络管理员**
4. **使用完全离线的语音识别方案**

## 预防措施

1. **定期检查网络连接**
2. **备份可用的DNS设置**
3. **保持离线识别依赖更新**
4. **准备备用识别方案**

---

*如果您需要更多帮助，请检查应用程序的状态信息或联系技术支持。* 